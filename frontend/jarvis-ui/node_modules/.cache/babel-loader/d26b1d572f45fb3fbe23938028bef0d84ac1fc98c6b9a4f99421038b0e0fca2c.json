{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Documents/GitHub/GPT1/frontend/jarvis-ui/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport { ThemeToggle } from \"./components/ThemeToggle\";\nimport { ResizableLayout } from \"./components/ResizableLayout\";\nimport { EditorView } from \"./components/EditorView\";\nimport faviconPng from \"./logo.jpg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:7777\";\nconsole.log(\"Using backend URL:\", BACKEND_URL);\nfunction App() {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentView, setCurrentView] = useState(\"blocks\");\n  const [responseData, setResponseData] = useState(null);\n  const [isOnline, setIsOnline] = useState(false);\n  const [status, setStatus] = useState(\"Agents ready\");\n  const [expandedReasoning, setExpandedReasoning] = useState(new Set());\n  const messagesEndRef = useRef(null);\n\n  // Editor/Viewer State\n  const [activeFile, setActiveFile] = useState(null);\n  const [viewMode, setViewMode] = useState(\"browser\"); // \"browser\" or \"editor\"\n  const fileInputRef = useRef(null);\n  const fetchLatestAnswer = useCallback(async () => {\n    try {\n      const res = await axios.get(`${BACKEND_URL}/latest_answer`);\n      const data = res.data;\n      updateData(data);\n      if (!data.answer || data.answer.trim() === \"\") {\n        return;\n      }\n      const normalizedNewAnswer = normalizeAnswer(data.answer);\n      const answerExists = messages.some(msg => normalizeAnswer(msg.content) === normalizedNewAnswer);\n      if (!answerExists) {\n        setMessages(prev => [...prev, {\n          type: \"agent\",\n          content: data.answer,\n          reasoning: data.reasoning,\n          agentName: data.agent_name,\n          status: data.status,\n          uid: data.uid\n        }]);\n        setStatus(data.status);\n        scrollToBottom();\n      } else {\n        console.log(\"Duplicate answer detected, skipping:\", data.answer);\n      }\n    } catch (error) {\n      console.error(\"Error fetching latest answer:\", error);\n    }\n  }, [messages]);\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      checkHealth();\n      fetchLatestAnswer();\n      fetchScreenshot();\n    }, 3000);\n    return () => clearInterval(intervalId);\n  }, [fetchLatestAnswer]);\n  const checkHealth = async () => {\n    try {\n      await axios.get(`${BACKEND_URL}/health`);\n      setIsOnline(true);\n      console.log(\"System is online\");\n    } catch {\n      setIsOnline(false);\n      console.log(\"System is offline\");\n    }\n  };\n  const fetchScreenshot = async () => {\n    try {\n      const timestamp = new Date().getTime();\n      const res = await axios.get(`${BACKEND_URL}/screenshots/updated_screen.png?timestamp=${timestamp}`, {\n        responseType: \"blob\"\n      });\n      console.log(\"Screenshot fetched successfully\");\n      const imageUrl = URL.createObjectURL(res.data);\n      setResponseData(prev => {\n        if (prev !== null && prev !== void 0 && prev.screenshot && prev.screenshot !== \"placeholder.png\") {\n          URL.revokeObjectURL(prev.screenshot);\n        }\n        return {\n          ...prev,\n          screenshot: imageUrl,\n          screenshotTimestamp: new Date().getTime()\n        };\n      });\n    } catch (err) {\n      console.error(\"Error fetching screenshot:\", err);\n      setResponseData(prev => ({\n        ...prev,\n        screenshot: \"placeholder.png\",\n        screenshotTimestamp: new Date().getTime()\n      }));\n    }\n  };\n  const normalizeAnswer = answer => {\n    return answer.trim().toLowerCase().replace(/\\s+/g, \" \").replace(/[.,!?]/g, \"\");\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  const toggleReasoning = messageIndex => {\n    setExpandedReasoning(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(messageIndex)) {\n        newSet.delete(messageIndex);\n      } else {\n        newSet.add(messageIndex);\n      }\n      return newSet;\n    });\n  };\n  const updateData = data => {\n    setResponseData(prev => ({\n      ...prev,\n      blocks: data.blocks || prev.blocks || null,\n      done: data.done,\n      answer: data.answer,\n      agent_name: data.agent_name,\n      status: data.status,\n      uid: data.uid\n    }));\n  };\n  const processQuery = async text => {\n    if (!text.trim()) return;\n    checkHealth();\n    setMessages(prev => [...prev, {\n      type: \"user\",\n      content: text\n    }]);\n    setIsLoading(true);\n    setError(null);\n    try {\n      console.log(\"Sending query:\", text);\n      const res = await axios.post(`${BACKEND_URL}/query`, {\n        query: text,\n        tts_enabled: false\n      });\n      console.log(\"Response:\", res.data);\n      const data = res.data;\n      updateData(data);\n    } catch (err) {\n      var _err$response, _err$response2;\n      console.error(\"Error:\", err);\n      const responseData = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data;\n      const statusCode = err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status;\n      const serverMessage = (typeof (responseData === null || responseData === void 0 ? void 0 : responseData.reasoning) === \"string\" && responseData.reasoning.trim() ? responseData.reasoning : null) || (typeof (responseData === null || responseData === void 0 ? void 0 : responseData.error) === \"string\" && responseData.error.trim() ? responseData.error : null);\n      const errorContent = statusCode === 429 ? \"Error: Il sistema sta ancora elaborando una richiesta. Aspetta qualche secondo o premi Stop.\" : serverMessage ? serverMessage.startsWith(\"Error:\") ? serverMessage : `Error: ${serverMessage}` : \"Error: Unable to get a response.\";\n      setError(\"Failed to process query.\");\n      setMessages(prev => [...prev, {\n        type: \"error\",\n        content: errorContent\n      }]);\n    } finally {\n      console.log(\"Query completed\");\n      setIsLoading(false);\n    }\n  };\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      const res = await axios.post(`${BACKEND_URL}/upload`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      const uploadedFilename = res.data.filename || file.name;\n      setActiveFile(uploadedFilename);\n      setViewMode(\"editor\");\n      await processQuery(`I uploaded file: ${uploadedFilename}. Please analyze/edit it.`);\n    } catch (err) {\n      console.error(\"Error uploading file:\", err);\n      setError(\"Failed to upload file\");\n    }\n  };\n  const handleStop = async e => {\n    e.preventDefault();\n    checkHealth();\n    setIsLoading(false);\n    setError(null);\n    try {\n      await axios.get(`${BACKEND_URL}/stop`);\n      setStatus(\"Requesting stop...\");\n    } catch (err) {\n      console.error(\"Error stopping the agent:\", err);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!query.trim()) {\n      console.log(\"Empty query\");\n      return;\n    }\n    const textToSend = query;\n    setQuery(\"\");\n    await processQuery(textToSend);\n  };\n  const handleGetScreenshot = async () => {\n    try {\n      setCurrentView(\"screenshot\");\n    } catch (err) {\n      setError(\"Browser not in use\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo-container\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: faviconPng,\n            alt: \"Agentic Local\",\n            className: \"logo-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brand-text\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Agentic Local\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-status\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `status-indicator ${isOnline ? \"online\" : \"offline\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-dot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-text\",\n            children: isOnline ? \"Online\" : \"Offline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"view-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `toggle-btn ${viewMode === \"browser\" ? \"active\" : \"\"}`,\n            onClick: () => setViewMode(\"browser\"),\n            children: \"Browser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `toggle-btn ${viewMode === \"editor\" ? \"active\" : \"\"}`,\n            onClick: () => setViewMode(\"editor\"),\n            children: \"Editor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(ThemeToggle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(ResizableLayout, {\n        initialLeftWidth: 50,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Chat Interface\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"messages\",\n            children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"placeholder\",\n              children: \"No messages yet. Type below to start!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this) : messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message ${msg.type === \"user\" ? \"user-message\" : msg.type === \"agent\" ? \"agent-message\" : \"error-message\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-header\",\n                children: [msg.type === \"agent\" && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"agent-name\",\n                  children: msg.agentName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 25\n                }, this), msg.type === \"agent\" && msg.reasoning && expandedReasoning.has(index) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"reasoning-content\",\n                  children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                    children: msg.reasoning\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 27\n                }, this), msg.type === \"agent\" && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"reasoning-toggle\",\n                  onClick: () => toggleReasoning(index),\n                  title: expandedReasoning.has(index) ? \"Hide reasoning\" : \"Show reasoning\",\n                  children: [expandedReasoning.has(index) ? \"â–¼\" : \"â–¶\", \" Reasoning\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: msg.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), isOnline && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-animation\",\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 26\n          }, this), !isLoading && !isOnline && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"loading-animation\",\n            children: \"System offline. Deploy backend first.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"input-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              style: {\n                display: \"none\"\n              },\n              onChange: handleFileUpload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"upload-btn\",\n              onClick: () => {\n                var _fileInputRef$current;\n                return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n              },\n              title: \"Upload File\",\n              children: \"\\uD83D\\uDCCE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: query,\n              onChange: e => setQuery(e.target.value),\n              placeholder: \"Enter your query...\",\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"action-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: isLoading,\n                className: \"icon-button\",\n                \"aria-label\": \"Send message\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"18\",\n                  height: \"18\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleStop,\n                className: \"icon-button stop-button\",\n                \"aria-label\": \"Stop processing\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"16\",\n                  height: \"16\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  children: /*#__PURE__*/_jsxDEV(\"rect\", {\n                    x: \"6\",\n                    y: \"6\",\n                    width: \"12\",\n                    height: \"12\",\n                    fill: \"currentColor\",\n                    rx: \"2\",\n                    stroke: \"none\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), viewMode === \"editor\" ? /*#__PURE__*/_jsxDEV(EditorView, {\n          activeFile: activeFile,\n          onFileChange: setActiveFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"computer-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Computer View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"view-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: currentView === \"blocks\" ? \"active\" : \"\",\n              onClick: () => setCurrentView(\"blocks\"),\n              children: \"Logs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: currentView === \"screenshot\" ? \"active\" : \"\",\n              onClick: responseData !== null && responseData !== void 0 && responseData.screenshot ? () => setCurrentView(\"screenshot\") : handleGetScreenshot,\n              children: \"Browser\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content\",\n            children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 27\n            }, this), currentView === \"blocks\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"blocks\",\n              children: responseData && responseData.blocks && Object.values(responseData.blocks).length > 0 ? Object.values(responseData.blocks).map((block, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-tool\",\n                  children: [\"Tool: \", block.tool_type]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: block.block\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-feedback\",\n                  children: [\"Feedback: \", block.feedback]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 27\n                }, this), block.success ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-success\",\n                  children: \"Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 29\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-failure\",\n                  children: \"Failure\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 29\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 25\n              }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-tool\",\n                  children: \"Tool: No tool in use\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: \"No logs available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"screenshot\",\n              children: responseData !== null && responseData !== void 0 && responseData.screenshot && responseData.screenshot !== \"placeholder.png\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: responseData === null || responseData === void 0 ? void 0 : responseData.screenshot,\n                alt: \"Screenshot\",\n                onError: e => {\n                  e.target.src = \"placeholder.png\";\n                  console.error(\"Failed to load screenshot\");\n                }\n              }, (responseData === null || responseData === void 0 ? void 0 : responseData.screenshotTimestamp) || \"default\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-tool\",\n                  children: \"Browser non disponibile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: \"Nessuno screenshot. Le azioni di ricerca appaiono in Editor View come tool web_search.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"wIsPurybXKl5WVdR0DMPe42QR9A=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","ReactMarkdown","axios","ThemeToggle","ResizableLayout","EditorView","faviconPng","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","console","log","App","_s","query","setQuery","messages","setMessages","isLoading","setIsLoading","error","setError","currentView","setCurrentView","responseData","setResponseData","isOnline","setIsOnline","status","setStatus","expandedReasoning","setExpandedReasoning","Set","messagesEndRef","activeFile","setActiveFile","viewMode","setViewMode","fileInputRef","fetchLatestAnswer","res","get","data","updateData","answer","trim","normalizedNewAnswer","normalizeAnswer","answerExists","some","msg","content","prev","type","reasoning","agentName","agent_name","uid","scrollToBottom","intervalId","setInterval","checkHealth","fetchScreenshot","clearInterval","timestamp","Date","getTime","responseType","imageUrl","URL","createObjectURL","screenshot","revokeObjectURL","screenshotTimestamp","err","toLowerCase","replace","_messagesEndRef$curre","current","scrollIntoView","behavior","toggleReasoning","messageIndex","newSet","has","delete","add","blocks","done","processQuery","text","post","tts_enabled","_err$response","_err$response2","response","statusCode","serverMessage","errorContent","startsWith","handleFileUpload","e","file","target","files","formData","FormData","append","headers","uploadedFilename","filename","name","handleStop","preventDefault","handleSubmit","textToSend","handleGetScreenshot","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","initialLeftWidth","length","map","index","title","ref","onSubmit","style","display","onChange","_fileInputRef$current","click","value","placeholder","disabled","width","height","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x","y","rx","onFileChange","Object","values","block","tool_type","feedback","success","onError","_c","$RefreshReg$"],"sources":["/Users/macbookair/Documents/GitHub/GPT1/frontend/jarvis-ui/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport { ThemeToggle } from \"./components/ThemeToggle\";\nimport { ResizableLayout } from \"./components/ResizableLayout\";\nimport { EditorView } from \"./components/EditorView\";\nimport faviconPng from \"./logo.jpg\";\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:7777\";\nconsole.log(\"Using backend URL:\", BACKEND_URL);\n\nfunction App() {\n  const [query, setQuery] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentView, setCurrentView] = useState(\"blocks\");\n  const [responseData, setResponseData] = useState(null);\n  const [isOnline, setIsOnline] = useState(false);\n  const [status, setStatus] = useState(\"Agents ready\");\n  const [expandedReasoning, setExpandedReasoning] = useState(new Set());\n  const messagesEndRef = useRef(null);\n  \n  // Editor/Viewer State\n  const [activeFile, setActiveFile] = useState(null);\n  const [viewMode, setViewMode] = useState(\"browser\"); // \"browser\" or \"editor\"\n  const fileInputRef = useRef(null);\n\n  const fetchLatestAnswer = useCallback(async () => {\n    try {\n      const res = await axios.get(`${BACKEND_URL}/latest_answer`);\n      const data = res.data;\n\n      updateData(data);\n      if (!data.answer || data.answer.trim() === \"\") {\n        return;\n      }\n      const normalizedNewAnswer = normalizeAnswer(data.answer);\n      const answerExists = messages.some(\n        (msg) => normalizeAnswer(msg.content) === normalizedNewAnswer\n      );\n      if (!answerExists) {\n        setMessages((prev) => [\n          ...prev,\n          {\n            type: \"agent\",\n            content: data.answer,\n            reasoning: data.reasoning,\n            agentName: data.agent_name,\n            status: data.status,\n            uid: data.uid,\n          },\n        ]);\n        setStatus(data.status);\n        scrollToBottom();\n      } else {\n        console.log(\"Duplicate answer detected, skipping:\", data.answer);\n      }\n    } catch (error) {\n      console.error(\"Error fetching latest answer:\", error);\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      checkHealth();\n      fetchLatestAnswer();\n      fetchScreenshot();\n    }, 3000);\n    return () => clearInterval(intervalId);\n  }, [fetchLatestAnswer]);\n\n  const checkHealth = async () => {\n    try {\n      await axios.get(`${BACKEND_URL}/health`);\n      setIsOnline(true);\n      console.log(\"System is online\");\n    } catch {\n      setIsOnline(false);\n      console.log(\"System is offline\");\n    }\n  };\n\n  const fetchScreenshot = async () => {\n    try {\n      const timestamp = new Date().getTime();\n      const res = await axios.get(\n        `${BACKEND_URL}/screenshots/updated_screen.png?timestamp=${timestamp}`,\n        {\n          responseType: \"blob\",\n        }\n      );\n      console.log(\"Screenshot fetched successfully\");\n      const imageUrl = URL.createObjectURL(res.data);\n      setResponseData((prev) => {\n        if (prev?.screenshot && prev.screenshot !== \"placeholder.png\") {\n          URL.revokeObjectURL(prev.screenshot);\n        }\n        return {\n          ...prev,\n          screenshot: imageUrl,\n          screenshotTimestamp: new Date().getTime(),\n        };\n      });\n    } catch (err) {\n      console.error(\"Error fetching screenshot:\", err);\n      setResponseData((prev) => ({\n        ...prev,\n        screenshot: \"placeholder.png\",\n        screenshotTimestamp: new Date().getTime(),\n      }));\n    }\n  };\n\n  const normalizeAnswer = (answer) => {\n    return answer\n      .trim()\n      .toLowerCase()\n      .replace(/\\s+/g, \" \")\n      .replace(/[.,!?]/g, \"\");\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const toggleReasoning = (messageIndex) => {\n    setExpandedReasoning((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(messageIndex)) {\n        newSet.delete(messageIndex);\n      } else {\n        newSet.add(messageIndex);\n      }\n      return newSet;\n    });\n  };\n\n  const updateData = (data) => {\n    setResponseData((prev) => ({\n      ...prev,\n      blocks: data.blocks || prev.blocks || null,\n      done: data.done,\n      answer: data.answer,\n      agent_name: data.agent_name,\n      status: data.status,\n      uid: data.uid,\n    }));\n  };\n\n  const processQuery = async (text) => {\n    if (!text.trim()) return;\n    \n    checkHealth();\n    setMessages((prev) => [...prev, { type: \"user\", content: text }]);\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      console.log(\"Sending query:\", text);\n      const res = await axios.post(`${BACKEND_URL}/query`, {\n        query: text,\n        tts_enabled: false,\n      });\n      console.log(\"Response:\", res.data);\n      const data = res.data;\n      updateData(data);\n    } catch (err) {\n      console.error(\"Error:\", err);\n      const responseData = err?.response?.data;\n      const statusCode = err?.response?.status;\n      const serverMessage =\n        (typeof responseData?.reasoning === \"string\" && responseData.reasoning.trim()\n          ? responseData.reasoning\n          : null) ||\n        (typeof responseData?.error === \"string\" && responseData.error.trim()\n          ? responseData.error\n          : null);\n      const errorContent =\n        statusCode === 429\n          ? \"Error: Il sistema sta ancora elaborando una richiesta. Aspetta qualche secondo o premi Stop.\"\n          : serverMessage\n        ? serverMessage.startsWith(\"Error:\")\n          ? serverMessage\n          : `Error: ${serverMessage}`\n        : \"Error: Unable to get a response.\";\n      setError(\"Failed to process query.\");\n      setMessages((prev) => [\n        ...prev,\n        { type: \"error\", content: errorContent },\n      ]);\n    } finally {\n      console.log(\"Query completed\");\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n        const res = await axios.post(`${BACKEND_URL}/upload`, formData, {\n            headers: {\n                \"Content-Type\": \"multipart/form-data\",\n            },\n        });\n        const uploadedFilename = res.data.filename || file.name;\n        setActiveFile(uploadedFilename);\n        setViewMode(\"editor\");\n        \n        await processQuery(`I uploaded file: ${uploadedFilename}. Please analyze/edit it.`);\n    } catch (err) {\n        console.error(\"Error uploading file:\", err);\n        setError(\"Failed to upload file\");\n    }\n  };\n\n  const handleStop = async (e) => {\n    e.preventDefault();\n    checkHealth();\n    setIsLoading(false);\n    setError(null);\n    try {\n      await axios.get(`${BACKEND_URL}/stop`);\n      setStatus(\"Requesting stop...\");\n    } catch (err) {\n      console.error(\"Error stopping the agent:\", err);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!query.trim()) {\n      console.log(\"Empty query\");\n      return;\n    }\n    const textToSend = query;\n    setQuery(\"\");\n    await processQuery(textToSend);\n  };\n\n  const handleGetScreenshot = async () => {\n    try {\n      setCurrentView(\"screenshot\");\n    } catch (err) {\n      setError(\"Browser not in use\");\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <header className=\"header\">\n        <div className=\"header-brand\">\n          <div className=\"logo-container\">\n            <img src={faviconPng} alt=\"Agentic Local\" className=\"logo-icon\" />\n          </div>\n          <div className=\"brand-text\">\n            <h1>Agentic Local</h1>\n          </div>\n        </div>\n        <div className=\"header-status\">\n          <div\n            className={`status-indicator ${isOnline ? \"online\" : \"offline\"}`}\n          >\n            <div className=\"status-dot\"></div>\n            <span className=\"status-text\">\n              {isOnline ? \"Online\" : \"Offline\"}\n            </span>\n          </div>\n        </div>\n        <div className=\"header-actions\">\n          <div className=\"view-toggle\">\n            <button \n                className={`toggle-btn ${viewMode === \"browser\" ? \"active\" : \"\"}`}\n                onClick={() => setViewMode(\"browser\")}\n            >\n                Browser\n            </button>\n            <button \n                className={`toggle-btn ${viewMode === \"editor\" ? \"active\" : \"\"}`}\n                onClick={() => setViewMode(\"editor\")}\n            >\n                Editor\n            </button>\n          </div>\n          <div>\n            <ThemeToggle />\n          </div>\n        </div>\n      </header>\n      <main className=\"main\">\n        <ResizableLayout initialLeftWidth={50}>\n          <div className=\"chat-section\">\n            <h2>Chat Interface</h2>\n            <div className=\"messages\">\n              {messages.length === 0 ? (\n                <p className=\"placeholder\">\n                  No messages yet. Type below to start!\n                </p>\n              ) : (\n                messages.map((msg, index) => (\n                  <div\n                    key={index}\n                    className={`message ${\n                      msg.type === \"user\"\n                        ? \"user-message\"\n                        : msg.type === \"agent\"\n                        ? \"agent-message\"\n                        : \"error-message\"\n                    }`}\n                  >\n                    <div className=\"message-header\">\n                      {msg.type === \"agent\" && (\n                        <span className=\"agent-name\">{msg.agentName}</span>\n                      )}\n                      {msg.type === \"agent\" &&\n                        msg.reasoning &&\n                        expandedReasoning.has(index) && (\n                          <div className=\"reasoning-content\">\n                            <ReactMarkdown>{msg.reasoning}</ReactMarkdown>\n                          </div>\n                        )}\n                      {msg.type === \"agent\" && (\n                        <button\n                          className=\"reasoning-toggle\"\n                          onClick={() => toggleReasoning(index)}\n                          title={\n                            expandedReasoning.has(index)\n                              ? \"Hide reasoning\"\n                              : \"Show reasoning\"\n                          }\n                        >\n                          {expandedReasoning.has(index) ? \"â–¼\" : \"â–¶\"} Reasoning\n                        </button>\n                      )}\n                    </div>\n                    <div className=\"message-content\">\n                      <ReactMarkdown>{msg.content}</ReactMarkdown>\n                    </div>\n                  </div>\n                ))\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n            {isOnline && <div className=\"loading-animation\">{status}</div>}\n            {!isLoading && !isOnline && (\n              <p className=\"loading-animation\">\n                System offline. Deploy backend first.\n              </p>\n            )}\n            <form onSubmit={handleSubmit} className=\"input-area\">\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                style={{ display: \"none\" }}\n                onChange={handleFileUpload}\n              />\n              <button\n                type=\"button\"\n                className=\"upload-btn\"\n                onClick={() => fileInputRef.current?.click()}\n                title=\"Upload File\"\n              >\n                ðŸ“Ž\n              </button>\n              <input\n                type=\"text\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Enter your query...\"\n                disabled={isLoading}\n              />\n              <div className=\"action-buttons\">\n                <button\n                  type=\"submit\"\n                  disabled={isLoading}\n                  className=\"icon-button\"\n                  aria-label=\"Send message\"\n                >\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n                    <path\n                      d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    />\n                  </svg>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleStop}\n                  className=\"icon-button stop-button\"\n                  aria-label=\"Stop processing\"\n                >\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\n                    <rect\n                      x=\"6\"\n                      y=\"6\"\n                      width=\"12\"\n                      height=\"12\"\n                      fill=\"currentColor\"\n                      rx=\"2\"\n                      stroke=\"none\"\n                    />\n                  </svg>\n                </button>\n              </div>\n            </form>\n          </div>\n\n          {viewMode === \"editor\" ? (\n            <EditorView activeFile={activeFile} onFileChange={setActiveFile} />\n          ) : (\n            <div className=\"computer-section\">\n              <h2>Computer View</h2>\n              <div className=\"view-selector\">\n                <button\n                  className={currentView === \"blocks\" ? \"active\" : \"\"}\n                  onClick={() => setCurrentView(\"blocks\")}\n                >\n                  Logs\n                </button>\n                <button\n                  className={currentView === \"screenshot\" ? \"active\" : \"\"}\n                  onClick={\n                    responseData?.screenshot\n                      ? () => setCurrentView(\"screenshot\")\n                      : handleGetScreenshot\n                  }\n                >\n                  Browser\n                </button>\n              </div>\n              <div className=\"content\">\n                {error && <p className=\"error\">{error}</p>}\n                {currentView === \"blocks\" ? (\n                  <div className=\"blocks\">\n                    {responseData &&\n                    responseData.blocks &&\n                    Object.values(responseData.blocks).length > 0 ? (\n                      Object.values(responseData.blocks).map((block, index) => (\n                        <div key={index} className=\"block\">\n                          <p className=\"block-tool\">Tool: {block.tool_type}</p>\n                          <pre>{block.block}</pre>\n                          <p className=\"block-feedback\">\n                            Feedback: {block.feedback}\n                          </p>\n                          {block.success ? (\n                            <p className=\"block-success\">Success</p>\n                          ) : (\n                            <p className=\"block-failure\">Failure</p>\n                          )}\n                        </div>\n                      ))\n                    ) : (\n                      <div className=\"block\">\n                        <p className=\"block-tool\">Tool: No tool in use</p>\n                        <pre>No logs available</pre>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"screenshot\">\n                    {responseData?.screenshot &&\n                    responseData.screenshot !== \"placeholder.png\" ? (\n                      <img\n                        src={responseData?.screenshot}\n                        alt=\"Screenshot\"\n                        onError={(e) => {\n                          e.target.src = \"placeholder.png\";\n                          console.error(\"Failed to load screenshot\");\n                        }}\n                        key={responseData?.screenshotTimestamp || \"default\"}\n                      />\n                    ) : (\n                      <div className=\"block\">\n                        <p className=\"block-tool\">Browser non disponibile</p>\n                        <pre>\n                          Nessuno screenshot. Le azioni di ricerca appaiono in Editor\n                          View come tool web_search.\n                        </pre>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </ResizableLayout>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}