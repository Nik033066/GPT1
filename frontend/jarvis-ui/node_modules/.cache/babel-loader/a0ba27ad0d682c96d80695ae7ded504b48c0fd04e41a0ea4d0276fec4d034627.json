{"ast":null,"code":"var _jsxFileName = \"/Users/macbookair/Documents/GitHub/GPT1/frontend/jarvis-ui/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport { ThemeToggle } from \"./components/ThemeToggle\";\nimport { ResizableLayout } from \"./components/ResizableLayout\";\nimport { EditorView } from \"./components/EditorView\";\nimport faviconPng from \"./logo.jpg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:7777\";\nconsole.log(\"Using backend URL:\", BACKEND_URL);\nfunction App() {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentView, setCurrentView] = useState(\"blocks\");\n  const [responseData, setResponseData] = useState(null);\n  const [isOnline, setIsOnline] = useState(false);\n  const [status, setStatus] = useState(\"Agents ready\");\n  const [expandedReasoning, setExpandedReasoning] = useState(new Set());\n  const messagesEndRef = useRef(null);\n\n  // Editor/Viewer State\n  const [activeFile, setActiveFile] = useState(null);\n  const [viewMode, setViewMode] = useState(\"browser\"); // \"browser\" or \"editor\"\n  const fileInputRef = useRef(null);\n  const fetchLatestAnswer = useCallback(async () => {\n    try {\n      const res = await axios.get(`${BACKEND_URL}/latest_answer`);\n      const data = res.data;\n      updateData(data);\n      if (!data.answer || data.answer.trim() === \"\") {\n        return;\n      }\n      const normalizedNewAnswer = normalizeAnswer(data.answer);\n      const answerExists = messages.some(msg => normalizeAnswer(msg.content) === normalizedNewAnswer);\n      if (!answerExists) {\n        setMessages(prev => [...prev, {\n          type: \"agent\",\n          content: data.answer,\n          reasoning: data.reasoning,\n          agentName: data.agent_name,\n          status: data.status,\n          uid: data.uid\n        }]);\n        setStatus(data.status);\n        scrollToBottom();\n      } else {\n        console.log(\"Duplicate answer detected, skipping:\", data.answer);\n      }\n    } catch (error) {\n      console.error(\"Error fetching latest answer:\", error);\n    }\n  }, [messages]);\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      checkHealth();\n      fetchLatestAnswer();\n      fetchScreenshot();\n    }, 3000);\n    return () => clearInterval(intervalId);\n  }, [fetchLatestAnswer]);\n  const checkHealth = async () => {\n    try {\n      await axios.get(`${BACKEND_URL}/health`);\n      setIsOnline(true);\n      console.log(\"System is online\");\n    } catch {\n      setIsOnline(false);\n      console.log(\"System is offline\");\n    }\n  };\n  const fetchScreenshot = async () => {\n    try {\n      const timestamp = new Date().getTime();\n      const res = await axios.get(`${BACKEND_URL}/screenshots/updated_screen.png?timestamp=${timestamp}`, {\n        responseType: \"blob\"\n      });\n      console.log(\"Screenshot fetched successfully\");\n      const imageUrl = URL.createObjectURL(res.data);\n      setResponseData(prev => {\n        if (prev !== null && prev !== void 0 && prev.screenshot && prev.screenshot !== \"placeholder.png\") {\n          URL.revokeObjectURL(prev.screenshot);\n        }\n        return {\n          ...prev,\n          screenshot: imageUrl,\n          screenshotTimestamp: new Date().getTime()\n        };\n      });\n    } catch (err) {\n      console.error(\"Error fetching screenshot:\", err);\n      setResponseData(prev => ({\n        ...prev,\n        screenshot: \"placeholder.png\",\n        screenshotTimestamp: new Date().getTime()\n      }));\n    }\n  };\n  const normalizeAnswer = answer => {\n    return answer.trim().toLowerCase().replace(/\\s+/g, \" \").replace(/[.,!?]/g, \"\");\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  const toggleReasoning = messageIndex => {\n    setExpandedReasoning(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(messageIndex)) {\n        newSet.delete(messageIndex);\n      } else {\n        newSet.add(messageIndex);\n      }\n      return newSet;\n    });\n  };\n  const updateData = data => {\n    setResponseData(prev => ({\n      ...prev,\n      blocks: data.blocks || prev.blocks || null,\n      done: data.done,\n      answer: data.answer,\n      agent_name: data.agent_name,\n      status: data.status,\n      uid: data.uid\n    }));\n  };\n  const processQuery = async text => {\n    if (!text.trim()) return;\n    checkHealth();\n    setMessages(prev => [...prev, {\n      type: \"user\",\n      content: text\n    }]);\n    setIsLoading(true);\n    setError(null);\n    try {\n      console.log(\"Sending query:\", text);\n      const res = await axios.post(`${BACKEND_URL}/query`, {\n        query: text,\n        tts_enabled: false\n      });\n      console.log(\"Response:\", res.data);\n      const data = res.data;\n      updateData(data);\n    } catch (err) {\n      var _err$response, _err$response2;\n      console.error(\"Error:\", err);\n      const responseData = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data;\n      const statusCode = err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status;\n      const serverMessage = (typeof (responseData === null || responseData === void 0 ? void 0 : responseData.reasoning) === \"string\" && responseData.reasoning.trim() ? responseData.reasoning : null) || (typeof (responseData === null || responseData === void 0 ? void 0 : responseData.error) === \"string\" && responseData.error.trim() ? responseData.error : null);\n      const errorContent = statusCode === 429 ? \"Error: Il sistema sta ancora elaborando una richiesta. Aspetta qualche secondo o premi Stop.\" : serverMessage ? serverMessage.startsWith(\"Error:\") ? serverMessage : `Error: ${serverMessage}` : \"Error: Unable to get a response.\";\n      setError(\"Failed to process query.\");\n      setMessages(prev => [...prev, {\n        type: \"error\",\n        content: errorContent\n      }]);\n    } finally {\n      console.log(\"Query completed\");\n      setIsLoading(false);\n    }\n  };\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      const res = await axios.post(`${BACKEND_URL}/upload`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      const uploadedFilename = res.data.filename || file.name;\n      setActiveFile(uploadedFilename);\n      setViewMode(\"editor\");\n      await processQuery(`I uploaded file: ${uploadedFilename}. Please analyze/edit it.`);\n    } catch (err) {\n      console.error(\"Error uploading file:\", err);\n      setError(\"Failed to upload file\");\n    }\n  };\n  const handleStop = async e => {\n    e.preventDefault();\n    checkHealth();\n    setIsLoading(false);\n    setError(null);\n    try {\n      await axios.get(`${BACKEND_URL}/stop`);\n      setStatus(\"Requesting stop...\");\n    } catch (err) {\n      console.error(\"Error stopping the agent:\", err);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!query.trim()) {\n      console.log(\"Empty query\");\n      return;\n    }\n    let textToSend = query;\n    // Add context about the active file if available\n    if (activeFile && viewMode === \"editor\") {\n      textToSend += `\\n[System Context: User is viewing file '${activeFile}']`;\n    }\n    setQuery(\"\");\n    await processQuery(textToSend);\n  };\n  const handleGetScreenshot = async () => {\n    try {\n      setCurrentView(\"screenshot\");\n    } catch (err) {\n      setError(\"Browser not in use\");\n    }\n  };\n  const handleReset = async () => {\n    if (!window.confirm(\"Are you sure you want to reset the agent memory? This will clear conversation history.\")) return;\n    try {\n      await axios.post(`${BACKEND_URL}/reset`);\n      setMessages([]); // Clear frontend messages too\n      setStatus(\"Memory cleared\");\n    } catch (err) {\n      console.error(\"Error resetting memory:\", err);\n      setError(\"Failed to reset memory\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-brand\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo-container\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: faviconPng,\n            alt: \"Agentic Local\",\n            className: \"logo-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"brand-text\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Agentic Local\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-status\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `status-indicator ${isOnline ? \"online\" : \"offline\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-dot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-text\",\n            children: isOnline ? \"Online\" : \"Offline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"view-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `toggle-btn ${viewMode === \"browser\" ? \"active\" : \"\"}`,\n            onClick: () => setViewMode(\"browser\"),\n            children: \"Browser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `toggle-btn ${viewMode === \"editor\" ? \"active\" : \"\"}`,\n            onClick: () => setViewMode(\"editor\"),\n            children: \"Editor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleReset,\n            className: \"reset-btn\",\n            style: {\n              marginRight: '10px',\n              padding: '5px 10px',\n              backgroundColor: '#ef4444',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            },\n            children: \"\\u26A0\\uFE0F Reset Memory\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ThemeToggle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(ResizableLayout, {\n        initialLeftWidth: 50,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Chat Interface\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"messages\",\n            children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"placeholder\",\n              children: \"No messages yet. Type below to start!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this) : messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message ${msg.type === \"user\" ? \"user-message\" : msg.type === \"agent\" ? \"agent-message\" : \"error-message\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-header\",\n                children: [msg.type === \"agent\" && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"agent-name\",\n                  children: msg.agentName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 25\n                }, this), msg.type === \"agent\" && msg.reasoning && expandedReasoning.has(index) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"reasoning-content\",\n                  children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                    children: msg.reasoning\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 27\n                }, this), msg.type === \"agent\" && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"reasoning-toggle\",\n                  onClick: () => toggleReasoning(index),\n                  title: expandedReasoning.has(index) ? \"Hide reasoning\" : \"Show reasoning\",\n                  children: [expandedReasoning.has(index) ? \"‚ñº\" : \"‚ñ∂\", \" Reasoning\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: msg.content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), isOnline && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-animation\",\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 26\n          }, this), !isLoading && !isOnline && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"loading-animation\",\n            children: \"System offline. Deploy backend first.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"input-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              style: {\n                display: \"none\"\n              },\n              onChange: handleFileUpload\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"upload-btn\",\n              onClick: () => {\n                var _fileInputRef$current;\n                return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n              },\n              title: \"Upload File\",\n              children: \"\\uD83D\\uDCCE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: query,\n              onChange: e => setQuery(e.target.value),\n              placeholder: \"Enter your query...\",\n              disabled: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"action-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: isLoading,\n                className: \"icon-button\",\n                \"aria-label\": \"Send message\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"18\",\n                  height: \"18\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleStop,\n                className: \"icon-button stop-button\",\n                \"aria-label\": \"Stop processing\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"16\",\n                  height: \"16\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  children: /*#__PURE__*/_jsxDEV(\"rect\", {\n                    x: \"6\",\n                    y: \"6\",\n                    width: \"12\",\n                    height: \"12\",\n                    fill: \"currentColor\",\n                    rx: \"2\",\n                    stroke: \"none\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), viewMode === \"editor\" ? /*#__PURE__*/_jsxDEV(EditorView, {\n          activeFile: activeFile,\n          onFileChange: setActiveFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"computer-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Computer View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"view-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: currentView === \"blocks\" ? \"active\" : \"\",\n              onClick: () => setCurrentView(\"blocks\"),\n              children: \"Logs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: currentView === \"screenshot\" ? \"active\" : \"\",\n              onClick: responseData !== null && responseData !== void 0 && responseData.screenshot ? () => setCurrentView(\"screenshot\") : handleGetScreenshot,\n              children: \"Browser\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content\",\n            children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 27\n            }, this), currentView === \"blocks\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"blocks\",\n              children: responseData && responseData.blocks && Object.values(responseData.blocks).length > 0 ? Object.values(responseData.blocks).map((block, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-tool\",\n                  children: [\"Tool: \", block.tool_type]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: block.block\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-feedback\",\n                  children: [\"Feedback: \", block.feedback]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 27\n                }, this), block.success ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-success\",\n                  children: \"Success\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 29\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-failure\",\n                  children: \"Failure\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 29\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 25\n              }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-tool\",\n                  children: \"Tool: No tool in use\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: \"No logs available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"screenshot\",\n              children: responseData !== null && responseData !== void 0 && responseData.screenshot && responseData.screenshot !== \"placeholder.png\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: responseData === null || responseData === void 0 ? void 0 : responseData.screenshot,\n                alt: \"Screenshot\",\n                onError: e => {\n                  e.target.src = \"placeholder.png\";\n                  console.error(\"Failed to load screenshot\");\n                }\n              }, (responseData === null || responseData === void 0 ? void 0 : responseData.screenshotTimestamp) || \"default\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"block\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"block-tool\",\n                  children: \"Browser non disponibile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  children: \"Nessuno screenshot. Le azioni di ricerca appaiono in Editor View come tool web_search.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"wIsPurybXKl5WVdR0DMPe42QR9A=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","ReactMarkdown","axios","ThemeToggle","ResizableLayout","EditorView","faviconPng","jsxDEV","_jsxDEV","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","console","log","App","_s","query","setQuery","messages","setMessages","isLoading","setIsLoading","error","setError","currentView","setCurrentView","responseData","setResponseData","isOnline","setIsOnline","status","setStatus","expandedReasoning","setExpandedReasoning","Set","messagesEndRef","activeFile","setActiveFile","viewMode","setViewMode","fileInputRef","fetchLatestAnswer","res","get","data","updateData","answer","trim","normalizedNewAnswer","normalizeAnswer","answerExists","some","msg","content","prev","type","reasoning","agentName","agent_name","uid","scrollToBottom","intervalId","setInterval","checkHealth","fetchScreenshot","clearInterval","timestamp","Date","getTime","responseType","imageUrl","URL","createObjectURL","screenshot","revokeObjectURL","screenshotTimestamp","err","toLowerCase","replace","_messagesEndRef$curre","current","scrollIntoView","behavior","toggleReasoning","messageIndex","newSet","has","delete","add","blocks","done","processQuery","text","post","tts_enabled","_err$response","_err$response2","response","statusCode","serverMessage","errorContent","startsWith","handleFileUpload","e","file","target","files","formData","FormData","append","headers","uploadedFilename","filename","name","handleStop","preventDefault","handleSubmit","textToSend","handleGetScreenshot","handleReset","window","confirm","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","marginRight","padding","backgroundColor","color","border","borderRadius","cursor","initialLeftWidth","length","map","index","title","ref","onSubmit","display","onChange","_fileInputRef$current","click","value","placeholder","disabled","width","height","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x","y","rx","onFileChange","Object","values","block","tool_type","feedback","success","onError","_c","$RefreshReg$"],"sources":["/Users/macbookair/Documents/GitHub/GPT1/frontend/jarvis-ui/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport { ThemeToggle } from \"./components/ThemeToggle\";\nimport { ResizableLayout } from \"./components/ResizableLayout\";\nimport { EditorView } from \"./components/EditorView\";\nimport faviconPng from \"./logo.jpg\";\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:7777\";\nconsole.log(\"Using backend URL:\", BACKEND_URL);\n\nfunction App() {\n  const [query, setQuery] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentView, setCurrentView] = useState(\"blocks\");\n  const [responseData, setResponseData] = useState(null);\n  const [isOnline, setIsOnline] = useState(false);\n  const [status, setStatus] = useState(\"Agents ready\");\n  const [expandedReasoning, setExpandedReasoning] = useState(new Set());\n  const messagesEndRef = useRef(null);\n  \n  // Editor/Viewer State\n  const [activeFile, setActiveFile] = useState(null);\n  const [viewMode, setViewMode] = useState(\"browser\"); // \"browser\" or \"editor\"\n  const fileInputRef = useRef(null);\n\n  const fetchLatestAnswer = useCallback(async () => {\n    try {\n      const res = await axios.get(`${BACKEND_URL}/latest_answer`);\n      const data = res.data;\n\n      updateData(data);\n      if (!data.answer || data.answer.trim() === \"\") {\n        return;\n      }\n      const normalizedNewAnswer = normalizeAnswer(data.answer);\n      const answerExists = messages.some(\n        (msg) => normalizeAnswer(msg.content) === normalizedNewAnswer\n      );\n      if (!answerExists) {\n        setMessages((prev) => [\n          ...prev,\n          {\n            type: \"agent\",\n            content: data.answer,\n            reasoning: data.reasoning,\n            agentName: data.agent_name,\n            status: data.status,\n            uid: data.uid,\n          },\n        ]);\n        setStatus(data.status);\n        scrollToBottom();\n      } else {\n        console.log(\"Duplicate answer detected, skipping:\", data.answer);\n      }\n    } catch (error) {\n      console.error(\"Error fetching latest answer:\", error);\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      checkHealth();\n      fetchLatestAnswer();\n      fetchScreenshot();\n    }, 3000);\n    return () => clearInterval(intervalId);\n  }, [fetchLatestAnswer]);\n\n  const checkHealth = async () => {\n    try {\n      await axios.get(`${BACKEND_URL}/health`);\n      setIsOnline(true);\n      console.log(\"System is online\");\n    } catch {\n      setIsOnline(false);\n      console.log(\"System is offline\");\n    }\n  };\n\n  const fetchScreenshot = async () => {\n    try {\n      const timestamp = new Date().getTime();\n      const res = await axios.get(\n        `${BACKEND_URL}/screenshots/updated_screen.png?timestamp=${timestamp}`,\n        {\n          responseType: \"blob\",\n        }\n      );\n      console.log(\"Screenshot fetched successfully\");\n      const imageUrl = URL.createObjectURL(res.data);\n      setResponseData((prev) => {\n        if (prev?.screenshot && prev.screenshot !== \"placeholder.png\") {\n          URL.revokeObjectURL(prev.screenshot);\n        }\n        return {\n          ...prev,\n          screenshot: imageUrl,\n          screenshotTimestamp: new Date().getTime(),\n        };\n      });\n    } catch (err) {\n      console.error(\"Error fetching screenshot:\", err);\n      setResponseData((prev) => ({\n        ...prev,\n        screenshot: \"placeholder.png\",\n        screenshotTimestamp: new Date().getTime(),\n      }));\n    }\n  };\n\n  const normalizeAnswer = (answer) => {\n    return answer\n      .trim()\n      .toLowerCase()\n      .replace(/\\s+/g, \" \")\n      .replace(/[.,!?]/g, \"\");\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const toggleReasoning = (messageIndex) => {\n    setExpandedReasoning((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(messageIndex)) {\n        newSet.delete(messageIndex);\n      } else {\n        newSet.add(messageIndex);\n      }\n      return newSet;\n    });\n  };\n\n  const updateData = (data) => {\n    setResponseData((prev) => ({\n      ...prev,\n      blocks: data.blocks || prev.blocks || null,\n      done: data.done,\n      answer: data.answer,\n      agent_name: data.agent_name,\n      status: data.status,\n      uid: data.uid,\n    }));\n  };\n\n  const processQuery = async (text) => {\n    if (!text.trim()) return;\n    \n    checkHealth();\n    setMessages((prev) => [...prev, { type: \"user\", content: text }]);\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      console.log(\"Sending query:\", text);\n      const res = await axios.post(`${BACKEND_URL}/query`, {\n        query: text,\n        tts_enabled: false,\n      });\n      console.log(\"Response:\", res.data);\n      const data = res.data;\n      updateData(data);\n    } catch (err) {\n      console.error(\"Error:\", err);\n      const responseData = err?.response?.data;\n      const statusCode = err?.response?.status;\n      const serverMessage =\n        (typeof responseData?.reasoning === \"string\" && responseData.reasoning.trim()\n          ? responseData.reasoning\n          : null) ||\n        (typeof responseData?.error === \"string\" && responseData.error.trim()\n          ? responseData.error\n          : null);\n      const errorContent =\n        statusCode === 429\n          ? \"Error: Il sistema sta ancora elaborando una richiesta. Aspetta qualche secondo o premi Stop.\"\n          : serverMessage\n        ? serverMessage.startsWith(\"Error:\")\n          ? serverMessage\n          : `Error: ${serverMessage}`\n        : \"Error: Unable to get a response.\";\n      setError(\"Failed to process query.\");\n      setMessages((prev) => [\n        ...prev,\n        { type: \"error\", content: errorContent },\n      ]);\n    } finally {\n      console.log(\"Query completed\");\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n        const res = await axios.post(`${BACKEND_URL}/upload`, formData, {\n            headers: {\n                \"Content-Type\": \"multipart/form-data\",\n            },\n        });\n        const uploadedFilename = res.data.filename || file.name;\n        setActiveFile(uploadedFilename);\n        setViewMode(\"editor\");\n        \n        await processQuery(`I uploaded file: ${uploadedFilename}. Please analyze/edit it.`);\n    } catch (err) {\n        console.error(\"Error uploading file:\", err);\n        setError(\"Failed to upload file\");\n    }\n  };\n\n  const handleStop = async (e) => {\n    e.preventDefault();\n    checkHealth();\n    setIsLoading(false);\n    setError(null);\n    try {\n      await axios.get(`${BACKEND_URL}/stop`);\n      setStatus(\"Requesting stop...\");\n    } catch (err) {\n      console.error(\"Error stopping the agent:\", err);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!query.trim()) {\n      console.log(\"Empty query\");\n      return;\n    }\n    let textToSend = query;\n    // Add context about the active file if available\n    if (activeFile && viewMode === \"editor\") {\n        textToSend += `\\n[System Context: User is viewing file '${activeFile}']`;\n    }\n\n    setQuery(\"\");\n    await processQuery(textToSend);\n  };\n\n  const handleGetScreenshot = async () => {\n    try {\n      setCurrentView(\"screenshot\");\n    } catch (err) {\n      setError(\"Browser not in use\");\n    }\n  };\n\n  const handleReset = async () => {\n    if (!window.confirm(\"Are you sure you want to reset the agent memory? This will clear conversation history.\")) return;\n    try {\n        await axios.post(`${BACKEND_URL}/reset`);\n        setMessages([]); // Clear frontend messages too\n        setStatus(\"Memory cleared\");\n    } catch (err) {\n        console.error(\"Error resetting memory:\", err);\n        setError(\"Failed to reset memory\");\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <header className=\"header\">\n        <div className=\"header-brand\">\n          <div className=\"logo-container\">\n            <img src={faviconPng} alt=\"Agentic Local\" className=\"logo-icon\" />\n          </div>\n          <div className=\"brand-text\">\n            <h1>Agentic Local</h1>\n          </div>\n        </div>\n        <div className=\"header-status\">\n          <div\n            className={`status-indicator ${isOnline ? \"online\" : \"offline\"}`}\n          >\n            <div className=\"status-dot\"></div>\n            <span className=\"status-text\">\n              {isOnline ? \"Online\" : \"Offline\"}\n            </span>\n          </div>\n        </div>\n        <div className=\"header-actions\">\n          <div className=\"view-toggle\">\n            <button \n                className={`toggle-btn ${viewMode === \"browser\" ? \"active\" : \"\"}`}\n                onClick={() => setViewMode(\"browser\")}\n            >\n                Browser\n            </button>\n            <button \n                className={`toggle-btn ${viewMode === \"editor\" ? \"active\" : \"\"}`}\n                onClick={() => setViewMode(\"editor\")}\n            >\n                Editor\n            </button>\n          </div>\n          <div>\n            <button onClick={handleReset} className=\"reset-btn\" style={{marginRight: '10px', padding: '5px 10px', backgroundColor: '#ef4444', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer'}}>‚ö†Ô∏è Reset Memory</button>\n            <ThemeToggle />\n          </div>\n        </div>\n      </header>\n      <main className=\"main\">\n        <ResizableLayout initialLeftWidth={50}>\n          <div className=\"chat-section\">\n            <h2>Chat Interface</h2>\n            <div className=\"messages\">\n              {messages.length === 0 ? (\n                <p className=\"placeholder\">\n                  No messages yet. Type below to start!\n                </p>\n              ) : (\n                messages.map((msg, index) => (\n                  <div\n                    key={index}\n                    className={`message ${\n                      msg.type === \"user\"\n                        ? \"user-message\"\n                        : msg.type === \"agent\"\n                        ? \"agent-message\"\n                        : \"error-message\"\n                    }`}\n                  >\n                    <div className=\"message-header\">\n                      {msg.type === \"agent\" && (\n                        <span className=\"agent-name\">{msg.agentName}</span>\n                      )}\n                      {msg.type === \"agent\" &&\n                        msg.reasoning &&\n                        expandedReasoning.has(index) && (\n                          <div className=\"reasoning-content\">\n                            <ReactMarkdown>{msg.reasoning}</ReactMarkdown>\n                          </div>\n                        )}\n                      {msg.type === \"agent\" && (\n                        <button\n                          className=\"reasoning-toggle\"\n                          onClick={() => toggleReasoning(index)}\n                          title={\n                            expandedReasoning.has(index)\n                              ? \"Hide reasoning\"\n                              : \"Show reasoning\"\n                          }\n                        >\n                          {expandedReasoning.has(index) ? \"‚ñº\" : \"‚ñ∂\"} Reasoning\n                        </button>\n                      )}\n                    </div>\n                    <div className=\"message-content\">\n                      <ReactMarkdown>{msg.content}</ReactMarkdown>\n                    </div>\n                  </div>\n                ))\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n            {isOnline && <div className=\"loading-animation\">{status}</div>}\n            {!isLoading && !isOnline && (\n              <p className=\"loading-animation\">\n                System offline. Deploy backend first.\n              </p>\n            )}\n            <form onSubmit={handleSubmit} className=\"input-area\">\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                style={{ display: \"none\" }}\n                onChange={handleFileUpload}\n              />\n              <button\n                type=\"button\"\n                className=\"upload-btn\"\n                onClick={() => fileInputRef.current?.click()}\n                title=\"Upload File\"\n              >\n                üìé\n              </button>\n              <input\n                type=\"text\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Enter your query...\"\n                disabled={isLoading}\n              />\n              <div className=\"action-buttons\">\n                <button\n                  type=\"submit\"\n                  disabled={isLoading}\n                  className=\"icon-button\"\n                  aria-label=\"Send message\"\n                >\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\">\n                    <path\n                      d=\"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    />\n                  </svg>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleStop}\n                  className=\"icon-button stop-button\"\n                  aria-label=\"Stop processing\"\n                >\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\">\n                    <rect\n                      x=\"6\"\n                      y=\"6\"\n                      width=\"12\"\n                      height=\"12\"\n                      fill=\"currentColor\"\n                      rx=\"2\"\n                      stroke=\"none\"\n                    />\n                  </svg>\n                </button>\n              </div>\n            </form>\n          </div>\n\n          {viewMode === \"editor\" ? (\n            <EditorView activeFile={activeFile} onFileChange={setActiveFile} />\n          ) : (\n            <div className=\"computer-section\">\n              <h2>Computer View</h2>\n              <div className=\"view-selector\">\n                <button\n                  className={currentView === \"blocks\" ? \"active\" : \"\"}\n                  onClick={() => setCurrentView(\"blocks\")}\n                >\n                  Logs\n                </button>\n                <button\n                  className={currentView === \"screenshot\" ? \"active\" : \"\"}\n                  onClick={\n                    responseData?.screenshot\n                      ? () => setCurrentView(\"screenshot\")\n                      : handleGetScreenshot\n                  }\n                >\n                  Browser\n                </button>\n              </div>\n              <div className=\"content\">\n                {error && <p className=\"error\">{error}</p>}\n                {currentView === \"blocks\" ? (\n                  <div className=\"blocks\">\n                    {responseData &&\n                    responseData.blocks &&\n                    Object.values(responseData.blocks).length > 0 ? (\n                      Object.values(responseData.blocks).map((block, index) => (\n                        <div key={index} className=\"block\">\n                          <p className=\"block-tool\">Tool: {block.tool_type}</p>\n                          <pre>{block.block}</pre>\n                          <p className=\"block-feedback\">\n                            Feedback: {block.feedback}\n                          </p>\n                          {block.success ? (\n                            <p className=\"block-success\">Success</p>\n                          ) : (\n                            <p className=\"block-failure\">Failure</p>\n                          )}\n                        </div>\n                      ))\n                    ) : (\n                      <div className=\"block\">\n                        <p className=\"block-tool\">Tool: No tool in use</p>\n                        <pre>No logs available</pre>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <div className=\"screenshot\">\n                    {responseData?.screenshot &&\n                    responseData.screenshot !== \"placeholder.png\" ? (\n                      <img\n                        src={responseData?.screenshot}\n                        alt=\"Screenshot\"\n                        onError={(e) => {\n                          e.target.src = \"placeholder.png\";\n                          console.error(\"Failed to load screenshot\");\n                        }}\n                        key={responseData?.screenshotTimestamp || \"default\"}\n                      />\n                    ) : (\n                      <div className=\"block\">\n                        <p className=\"block-tool\">Browser non disponibile</p>\n                        <pre>\n                          Nessuno screenshot. Le azioni di ricerca appaiono in Editor\n                          View come tool web_search.\n                        </pre>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </ResizableLayout>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,OAAOC,aAAa,MAAM,gBAAgB;AAC1C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,WAAW;AAClB,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,eAAe,QAAQ,8BAA8B;AAC9D,SAASC,UAAU,QAAQ,yBAAyB;AACpD,OAAOC,UAAU,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,uBAAuB;AAChFC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEL,WAAW,CAAC;AAE9C,SAASM,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACwB,SAAS,EAAEC,YAAY,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC0B,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC4B,WAAW,EAAEC,cAAc,CAAC,GAAG7B,QAAQ,CAAC,QAAQ,CAAC;EACxD,MAAM,CAAC8B,YAAY,EAAEC,eAAe,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACkC,MAAM,EAAEC,SAAS,CAAC,GAAGnC,QAAQ,CAAC,cAAc,CAAC;EACpD,MAAM,CAACoC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGrC,QAAQ,CAAC,IAAIsC,GAAG,CAAC,CAAC,CAAC;EACrE,MAAMC,cAAc,GAAGrC,MAAM,CAAC,IAAI,CAAC;;EAEnC;EACA,MAAM,CAACsC,UAAU,EAAEC,aAAa,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC0C,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;EACrD,MAAM4C,YAAY,GAAG1C,MAAM,CAAC,IAAI,CAAC;EAEjC,MAAM2C,iBAAiB,GAAG1C,WAAW,CAAC,YAAY;IAChD,IAAI;MACF,MAAM2C,GAAG,GAAG,MAAMzC,KAAK,CAAC0C,GAAG,CAAC,GAAGnC,WAAW,gBAAgB,CAAC;MAC3D,MAAMoC,IAAI,GAAGF,GAAG,CAACE,IAAI;MAErBC,UAAU,CAACD,IAAI,CAAC;MAChB,IAAI,CAACA,IAAI,CAACE,MAAM,IAAIF,IAAI,CAACE,MAAM,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;QAC7C;MACF;MACA,MAAMC,mBAAmB,GAAGC,eAAe,CAACL,IAAI,CAACE,MAAM,CAAC;MACxD,MAAMI,YAAY,GAAGhC,QAAQ,CAACiC,IAAI,CAC/BC,GAAG,IAAKH,eAAe,CAACG,GAAG,CAACC,OAAO,CAAC,KAAKL,mBAC5C,CAAC;MACD,IAAI,CAACE,YAAY,EAAE;QACjB/B,WAAW,CAAEmC,IAAI,IAAK,CACpB,GAAGA,IAAI,EACP;UACEC,IAAI,EAAE,OAAO;UACbF,OAAO,EAAET,IAAI,CAACE,MAAM;UACpBU,SAAS,EAAEZ,IAAI,CAACY,SAAS;UACzBC,SAAS,EAAEb,IAAI,CAACc,UAAU;UAC1B5B,MAAM,EAAEc,IAAI,CAACd,MAAM;UACnB6B,GAAG,EAAEf,IAAI,CAACe;QACZ,CAAC,CACF,CAAC;QACF5B,SAAS,CAACa,IAAI,CAACd,MAAM,CAAC;QACtB8B,cAAc,CAAC,CAAC;MAClB,CAAC,MAAM;QACLhD,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAE+B,IAAI,CAACE,MAAM,CAAC;MAClE;IACF,CAAC,CAAC,OAAOxB,KAAK,EAAE;MACdV,OAAO,CAACU,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACvD;EACF,CAAC,EAAE,CAACJ,QAAQ,CAAC,CAAC;EAEdrB,SAAS,CAAC,MAAM;IACd,MAAMgE,UAAU,GAAGC,WAAW,CAAC,MAAM;MACnCC,WAAW,CAAC,CAAC;MACbtB,iBAAiB,CAAC,CAAC;MACnBuB,eAAe,CAAC,CAAC;IACnB,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAMC,aAAa,CAACJ,UAAU,CAAC;EACxC,CAAC,EAAE,CAACpB,iBAAiB,CAAC,CAAC;EAEvB,MAAMsB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACF,MAAM9D,KAAK,CAAC0C,GAAG,CAAC,GAAGnC,WAAW,SAAS,CAAC;MACxCqB,WAAW,CAAC,IAAI,CAAC;MACjBjB,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACjC,CAAC,CAAC,MAAM;MACNgB,WAAW,CAAC,KAAK,CAAC;MAClBjB,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;IAClC;EACF,CAAC;EAED,MAAMmD,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,MAAME,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;MACtC,MAAM1B,GAAG,GAAG,MAAMzC,KAAK,CAAC0C,GAAG,CACzB,GAAGnC,WAAW,6CAA6C0D,SAAS,EAAE,EACtE;QACEG,YAAY,EAAE;MAChB,CACF,CAAC;MACDzD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAC9C,MAAMyD,QAAQ,GAAGC,GAAG,CAACC,eAAe,CAAC9B,GAAG,CAACE,IAAI,CAAC;MAC9CjB,eAAe,CAAE2B,IAAI,IAAK;QACxB,IAAIA,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEmB,UAAU,IAAInB,IAAI,CAACmB,UAAU,KAAK,iBAAiB,EAAE;UAC7DF,GAAG,CAACG,eAAe,CAACpB,IAAI,CAACmB,UAAU,CAAC;QACtC;QACA,OAAO;UACL,GAAGnB,IAAI;UACPmB,UAAU,EAAEH,QAAQ;UACpBK,mBAAmB,EAAE,IAAIR,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC;QAC1C,CAAC;MACH,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOQ,GAAG,EAAE;MACZhE,OAAO,CAACU,KAAK,CAAC,4BAA4B,EAAEsD,GAAG,CAAC;MAChDjD,eAAe,CAAE2B,IAAI,KAAM;QACzB,GAAGA,IAAI;QACPmB,UAAU,EAAE,iBAAiB;QAC7BE,mBAAmB,EAAE,IAAIR,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC;MAC1C,CAAC,CAAC,CAAC;IACL;EACF,CAAC;EAED,MAAMnB,eAAe,GAAIH,MAAM,IAAK;IAClC,OAAOA,MAAM,CACVC,IAAI,CAAC,CAAC,CACN8B,WAAW,CAAC,CAAC,CACbC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CACpBA,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;EAC3B,CAAC;EAED,MAAMlB,cAAc,GAAGA,CAAA,KAAM;IAAA,IAAAmB,qBAAA;IAC3B,CAAAA,qBAAA,GAAA5C,cAAc,CAAC6C,OAAO,cAAAD,qBAAA,uBAAtBA,qBAAA,CAAwBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAChE,CAAC;EAED,MAAMC,eAAe,GAAIC,YAAY,IAAK;IACxCnD,oBAAoB,CAAEqB,IAAI,IAAK;MAC7B,MAAM+B,MAAM,GAAG,IAAInD,GAAG,CAACoB,IAAI,CAAC;MAC5B,IAAI+B,MAAM,CAACC,GAAG,CAACF,YAAY,CAAC,EAAE;QAC5BC,MAAM,CAACE,MAAM,CAACH,YAAY,CAAC;MAC7B,CAAC,MAAM;QACLC,MAAM,CAACG,GAAG,CAACJ,YAAY,CAAC;MAC1B;MACA,OAAOC,MAAM;IACf,CAAC,CAAC;EACJ,CAAC;EAED,MAAMxC,UAAU,GAAID,IAAI,IAAK;IAC3BjB,eAAe,CAAE2B,IAAI,KAAM;MACzB,GAAGA,IAAI;MACPmC,MAAM,EAAE7C,IAAI,CAAC6C,MAAM,IAAInC,IAAI,CAACmC,MAAM,IAAI,IAAI;MAC1CC,IAAI,EAAE9C,IAAI,CAAC8C,IAAI;MACf5C,MAAM,EAAEF,IAAI,CAACE,MAAM;MACnBY,UAAU,EAAEd,IAAI,CAACc,UAAU;MAC3B5B,MAAM,EAAEc,IAAI,CAACd,MAAM;MACnB6B,GAAG,EAAEf,IAAI,CAACe;IACZ,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMgC,YAAY,GAAG,MAAOC,IAAI,IAAK;IACnC,IAAI,CAACA,IAAI,CAAC7C,IAAI,CAAC,CAAC,EAAE;IAElBgB,WAAW,CAAC,CAAC;IACb5C,WAAW,CAAEmC,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;MAAEC,IAAI,EAAE,MAAM;MAAEF,OAAO,EAAEuC;IAAK,CAAC,CAAC,CAAC;IACjEvE,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACFX,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAE+E,IAAI,CAAC;MACnC,MAAMlD,GAAG,GAAG,MAAMzC,KAAK,CAAC4F,IAAI,CAAC,GAAGrF,WAAW,QAAQ,EAAE;QACnDQ,KAAK,EAAE4E,IAAI;QACXE,WAAW,EAAE;MACf,CAAC,CAAC;MACFlF,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE6B,GAAG,CAACE,IAAI,CAAC;MAClC,MAAMA,IAAI,GAAGF,GAAG,CAACE,IAAI;MACrBC,UAAU,CAACD,IAAI,CAAC;IAClB,CAAC,CAAC,OAAOgC,GAAG,EAAE;MAAA,IAAAmB,aAAA,EAAAC,cAAA;MACZpF,OAAO,CAACU,KAAK,CAAC,QAAQ,EAAEsD,GAAG,CAAC;MAC5B,MAAMlD,YAAY,GAAGkD,GAAG,aAAHA,GAAG,wBAAAmB,aAAA,GAAHnB,GAAG,CAAEqB,QAAQ,cAAAF,aAAA,uBAAbA,aAAA,CAAenD,IAAI;MACxC,MAAMsD,UAAU,GAAGtB,GAAG,aAAHA,GAAG,wBAAAoB,cAAA,GAAHpB,GAAG,CAAEqB,QAAQ,cAAAD,cAAA,uBAAbA,cAAA,CAAelE,MAAM;MACxC,MAAMqE,aAAa,GACjB,CAAC,QAAOzE,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAE8B,SAAS,MAAK,QAAQ,IAAI9B,YAAY,CAAC8B,SAAS,CAACT,IAAI,CAAC,CAAC,GACzErB,YAAY,CAAC8B,SAAS,GACtB,IAAI,MACP,QAAO9B,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEJ,KAAK,MAAK,QAAQ,IAAII,YAAY,CAACJ,KAAK,CAACyB,IAAI,CAAC,CAAC,GACjErB,YAAY,CAACJ,KAAK,GAClB,IAAI,CAAC;MACX,MAAM8E,YAAY,GAChBF,UAAU,KAAK,GAAG,GACd,8FAA8F,GAC9FC,aAAa,GACfA,aAAa,CAACE,UAAU,CAAC,QAAQ,CAAC,GAChCF,aAAa,GACb,UAAUA,aAAa,EAAE,GAC3B,kCAAkC;MACtC5E,QAAQ,CAAC,0BAA0B,CAAC;MACpCJ,WAAW,CAAEmC,IAAI,IAAK,CACpB,GAAGA,IAAI,EACP;QAAEC,IAAI,EAAE,OAAO;QAAEF,OAAO,EAAE+C;MAAa,CAAC,CACzC,CAAC;IACJ,CAAC,SAAS;MACRxF,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAC9BQ,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMiF,gBAAgB,GAAG,MAAOC,CAAC,IAAK;IACpC,MAAMC,IAAI,GAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAC9B,IAAI,CAACF,IAAI,EAAE;IAEX,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEL,IAAI,CAAC;IAE7B,IAAI;MACA,MAAM9D,GAAG,GAAG,MAAMzC,KAAK,CAAC4F,IAAI,CAAC,GAAGrF,WAAW,SAAS,EAAEmG,QAAQ,EAAE;QAC5DG,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;MACF,MAAMC,gBAAgB,GAAGrE,GAAG,CAACE,IAAI,CAACoE,QAAQ,IAAIR,IAAI,CAACS,IAAI;MACvD5E,aAAa,CAAC0E,gBAAgB,CAAC;MAC/BxE,WAAW,CAAC,QAAQ,CAAC;MAErB,MAAMoD,YAAY,CAAC,oBAAoBoB,gBAAgB,2BAA2B,CAAC;IACvF,CAAC,CAAC,OAAOnC,GAAG,EAAE;MACVhE,OAAO,CAACU,KAAK,CAAC,uBAAuB,EAAEsD,GAAG,CAAC;MAC3CrD,QAAQ,CAAC,uBAAuB,CAAC;IACrC;EACF,CAAC;EAED,MAAM2F,UAAU,GAAG,MAAOX,CAAC,IAAK;IAC9BA,CAAC,CAACY,cAAc,CAAC,CAAC;IAClBpD,WAAW,CAAC,CAAC;IACb1C,YAAY,CAAC,KAAK,CAAC;IACnBE,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACF,MAAMtB,KAAK,CAAC0C,GAAG,CAAC,GAAGnC,WAAW,OAAO,CAAC;MACtCuB,SAAS,CAAC,oBAAoB,CAAC;IACjC,CAAC,CAAC,OAAO6C,GAAG,EAAE;MACZhE,OAAO,CAACU,KAAK,CAAC,2BAA2B,EAAEsD,GAAG,CAAC;IACjD;EACF,CAAC;EAED,MAAMwC,YAAY,GAAG,MAAOb,CAAC,IAAK;IAChCA,CAAC,CAACY,cAAc,CAAC,CAAC;IAClB,IAAI,CAACnG,KAAK,CAAC+B,IAAI,CAAC,CAAC,EAAE;MACjBnC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1B;IACF;IACA,IAAIwG,UAAU,GAAGrG,KAAK;IACtB;IACA,IAAIoB,UAAU,IAAIE,QAAQ,KAAK,QAAQ,EAAE;MACrC+E,UAAU,IAAI,4CAA4CjF,UAAU,IAAI;IAC5E;IAEAnB,QAAQ,CAAC,EAAE,CAAC;IACZ,MAAM0E,YAAY,CAAC0B,UAAU,CAAC;EAChC,CAAC;EAED,MAAMC,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI;MACF7F,cAAc,CAAC,YAAY,CAAC;IAC9B,CAAC,CAAC,OAAOmD,GAAG,EAAE;MACZrD,QAAQ,CAAC,oBAAoB,CAAC;IAChC;EACF,CAAC;EAED,MAAMgG,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,wFAAwF,CAAC,EAAE;IAC/G,IAAI;MACA,MAAMxH,KAAK,CAAC4F,IAAI,CAAC,GAAGrF,WAAW,QAAQ,CAAC;MACxCW,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;MACjBY,SAAS,CAAC,gBAAgB,CAAC;IAC/B,CAAC,CAAC,OAAO6C,GAAG,EAAE;MACVhE,OAAO,CAACU,KAAK,CAAC,yBAAyB,EAAEsD,GAAG,CAAC;MAC7CrD,QAAQ,CAAC,wBAAwB,CAAC;IACtC;EACF,CAAC;EAED,oBACEhB,OAAA;IAAKmH,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBpH,OAAA;MAAQmH,SAAS,EAAC,QAAQ;MAAAC,QAAA,gBACxBpH,OAAA;QAAKmH,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BpH,OAAA;UAAKmH,SAAS,EAAC,gBAAgB;UAAAC,QAAA,eAC7BpH,OAAA;YAAKqH,GAAG,EAAEvH,UAAW;YAACwH,GAAG,EAAC,eAAe;YAACH,SAAS,EAAC;UAAW;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/D,CAAC,eACN1H,OAAA;UAAKmH,SAAS,EAAC,YAAY;UAAAC,QAAA,eACzBpH,OAAA;YAAAoH,QAAA,EAAI;UAAa;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN1H,OAAA;QAAKmH,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5BpH,OAAA;UACEmH,SAAS,EAAE,oBAAoB9F,QAAQ,GAAG,QAAQ,GAAG,SAAS,EAAG;UAAA+F,QAAA,gBAEjEpH,OAAA;YAAKmH,SAAS,EAAC;UAAY;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAClC1H,OAAA;YAAMmH,SAAS,EAAC,aAAa;YAAAC,QAAA,EAC1B/F,QAAQ,GAAG,QAAQ,GAAG;UAAS;YAAAkG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN1H,OAAA;QAAKmH,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BpH,OAAA;UAAKmH,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BpH,OAAA;YACImH,SAAS,EAAE,cAAcpF,QAAQ,KAAK,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;YAClE4F,OAAO,EAAEA,CAAA,KAAM3F,WAAW,CAAC,SAAS,CAAE;YAAAoF,QAAA,EACzC;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT1H,OAAA;YACImH,SAAS,EAAE,cAAcpF,QAAQ,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAE,EAAG;YACjE4F,OAAO,EAAEA,CAAA,KAAM3F,WAAW,CAAC,QAAQ,CAAE;YAAAoF,QAAA,EACxC;UAED;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACN1H,OAAA;UAAAoH,QAAA,gBACEpH,OAAA;YAAQ2H,OAAO,EAAEX,WAAY;YAACG,SAAS,EAAC,WAAW;YAACS,KAAK,EAAE;cAACC,WAAW,EAAE,MAAM;cAAEC,OAAO,EAAE,UAAU;cAAEC,eAAe,EAAE,SAAS;cAAEC,KAAK,EAAE,OAAO;cAAEC,MAAM,EAAE,MAAM;cAAEC,YAAY,EAAE,KAAK;cAAEC,MAAM,EAAE;YAAS,CAAE;YAAAf,QAAA,EAAC;UAAe;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACnO1H,OAAA,CAACL,WAAW;YAAA4H,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eACT1H,OAAA;MAAMmH,SAAS,EAAC,MAAM;MAAAC,QAAA,eACpBpH,OAAA,CAACJ,eAAe;QAACwI,gBAAgB,EAAE,EAAG;QAAAhB,QAAA,gBACpCpH,OAAA;UAAKmH,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BpH,OAAA;YAAAoH,QAAA,EAAI;UAAc;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACvB1H,OAAA;YAAKmH,SAAS,EAAC,UAAU;YAAAC,QAAA,GACtBzG,QAAQ,CAAC0H,MAAM,KAAK,CAAC,gBACpBrI,OAAA;cAAGmH,SAAS,EAAC,aAAa;cAAAC,QAAA,EAAC;YAE3B;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,GAEJ/G,QAAQ,CAAC2H,GAAG,CAAC,CAACzF,GAAG,EAAE0F,KAAK,kBACtBvI,OAAA;cAEEmH,SAAS,EAAE,WACTtE,GAAG,CAACG,IAAI,KAAK,MAAM,GACf,cAAc,GACdH,GAAG,CAACG,IAAI,KAAK,OAAO,GACpB,eAAe,GACf,eAAe,EAClB;cAAAoE,QAAA,gBAEHpH,OAAA;gBAAKmH,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,GAC5BvE,GAAG,CAACG,IAAI,KAAK,OAAO,iBACnBhD,OAAA;kBAAMmH,SAAS,EAAC,YAAY;kBAAAC,QAAA,EAAEvE,GAAG,CAACK;gBAAS;kBAAAqE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CACnD,EACA7E,GAAG,CAACG,IAAI,KAAK,OAAO,IACnBH,GAAG,CAACI,SAAS,IACbxB,iBAAiB,CAACsD,GAAG,CAACwD,KAAK,CAAC,iBAC1BvI,OAAA;kBAAKmH,SAAS,EAAC,mBAAmB;kBAAAC,QAAA,eAChCpH,OAAA,CAACP,aAAa;oBAAA2H,QAAA,EAAEvE,GAAG,CAACI;kBAAS;oBAAAsE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAgB;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3C,CACN,EACF7E,GAAG,CAACG,IAAI,KAAK,OAAO,iBACnBhD,OAAA;kBACEmH,SAAS,EAAC,kBAAkB;kBAC5BQ,OAAO,EAAEA,CAAA,KAAM/C,eAAe,CAAC2D,KAAK,CAAE;kBACtCC,KAAK,EACH/G,iBAAiB,CAACsD,GAAG,CAACwD,KAAK,CAAC,GACxB,gBAAgB,GAChB,gBACL;kBAAAnB,QAAA,GAEA3F,iBAAiB,CAACsD,GAAG,CAACwD,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,EAAC,YAC5C;gBAAA;kBAAAhB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CACT;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACN1H,OAAA;gBAAKmH,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,eAC9BpH,OAAA,CAACP,aAAa;kBAAA2H,QAAA,EAAEvE,GAAG,CAACC;gBAAO;kBAAAyE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAgB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC,CAAC;YAAA,GApCDa,KAAK;cAAAhB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAqCP,CACN,CACF,eACD1H,OAAA;cAAKyI,GAAG,EAAE7G;YAAe;cAAA2F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB,CAAC,EACLrG,QAAQ,iBAAIrB,OAAA;YAAKmH,SAAS,EAAC,mBAAmB;YAAAC,QAAA,EAAE7F;UAAM;YAAAgG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EAC7D,CAAC7G,SAAS,IAAI,CAACQ,QAAQ,iBACtBrB,OAAA;YAAGmH,SAAS,EAAC,mBAAmB;YAAAC,QAAA,EAAC;UAEjC;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CACJ,eACD1H,OAAA;YAAM0I,QAAQ,EAAE7B,YAAa;YAACM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBAClDpH,OAAA;cACEgD,IAAI,EAAC,MAAM;cACXyF,GAAG,EAAExG,YAAa;cAClB2F,KAAK,EAAE;gBAAEe,OAAO,EAAE;cAAO,CAAE;cAC3BC,QAAQ,EAAE7C;YAAiB;cAAAwB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC,eACF1H,OAAA;cACEgD,IAAI,EAAC,QAAQ;cACbmE,SAAS,EAAC,YAAY;cACtBQ,OAAO,EAAEA,CAAA;gBAAA,IAAAkB,qBAAA;gBAAA,QAAAA,qBAAA,GAAM5G,YAAY,CAACwC,OAAO,cAAAoE,qBAAA,uBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC;cAAA,CAAC;cAC7CN,KAAK,EAAC,aAAa;cAAApB,QAAA,EACpB;YAED;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT1H,OAAA;cACEgD,IAAI,EAAC,MAAM;cACX+F,KAAK,EAAEtI,KAAM;cACbmI,QAAQ,EAAG5C,CAAC,IAAKtF,QAAQ,CAACsF,CAAC,CAACE,MAAM,CAAC6C,KAAK,CAAE;cAC1CC,WAAW,EAAC,qBAAqB;cACjCC,QAAQ,EAAEpI;YAAU;cAAA0G,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrB,CAAC,eACF1H,OAAA;cAAKmH,SAAS,EAAC,gBAAgB;cAAAC,QAAA,gBAC7BpH,OAAA;gBACEgD,IAAI,EAAC,QAAQ;gBACbiG,QAAQ,EAAEpI,SAAU;gBACpBsG,SAAS,EAAC,aAAa;gBACvB,cAAW,cAAc;gBAAAC,QAAA,eAEzBpH,OAAA;kBAAKkJ,KAAK,EAAC,IAAI;kBAACC,MAAM,EAAC,IAAI;kBAACC,OAAO,EAAC,WAAW;kBAACC,IAAI,EAAC,MAAM;kBAAAjC,QAAA,eACzDpH,OAAA;oBACEsJ,CAAC,EAAC,6CAA6C;oBAC/CC,MAAM,EAAC,cAAc;oBACrBC,WAAW,EAAC,GAAG;oBACfC,aAAa,EAAC,OAAO;oBACrBC,cAAc,EAAC;kBAAO;oBAAAnC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvB;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC,eACT1H,OAAA;gBACEgD,IAAI,EAAC,QAAQ;gBACb2E,OAAO,EAAEhB,UAAW;gBACpBQ,SAAS,EAAC,yBAAyB;gBACnC,cAAW,iBAAiB;gBAAAC,QAAA,eAE5BpH,OAAA;kBAAKkJ,KAAK,EAAC,IAAI;kBAACC,MAAM,EAAC,IAAI;kBAACC,OAAO,EAAC,WAAW;kBAACC,IAAI,EAAC,MAAM;kBAAAjC,QAAA,eACzDpH,OAAA;oBACE2J,CAAC,EAAC,GAAG;oBACLC,CAAC,EAAC,GAAG;oBACLV,KAAK,EAAC,IAAI;oBACVC,MAAM,EAAC,IAAI;oBACXE,IAAI,EAAC,cAAc;oBACnBQ,EAAE,EAAC,GAAG;oBACNN,MAAM,EAAC;kBAAM;oBAAAhC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACd;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,EAEL3F,QAAQ,KAAK,QAAQ,gBACpB/B,OAAA,CAACH,UAAU;UAACgC,UAAU,EAAEA,UAAW;UAACiI,YAAY,EAAEhI;QAAc;UAAAyF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAEnE1H,OAAA;UAAKmH,SAAS,EAAC,kBAAkB;UAAAC,QAAA,gBAC/BpH,OAAA;YAAAoH,QAAA,EAAI;UAAa;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtB1H,OAAA;YAAKmH,SAAS,EAAC,eAAe;YAAAC,QAAA,gBAC5BpH,OAAA;cACEmH,SAAS,EAAElG,WAAW,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAG;cACpD0G,OAAO,EAAEA,CAAA,KAAMzG,cAAc,CAAC,QAAQ,CAAE;cAAAkG,QAAA,EACzC;YAED;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT1H,OAAA;cACEmH,SAAS,EAAElG,WAAW,KAAK,YAAY,GAAG,QAAQ,GAAG,EAAG;cACxD0G,OAAO,EACLxG,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAE+C,UAAU,GACpB,MAAMhD,cAAc,CAAC,YAAY,CAAC,GAClC6F,mBACL;cAAAK,QAAA,EACF;YAED;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACN1H,OAAA;YAAKmH,SAAS,EAAC,SAAS;YAAAC,QAAA,GACrBrG,KAAK,iBAAIf,OAAA;cAAGmH,SAAS,EAAC,OAAO;cAAAC,QAAA,EAAErG;YAAK;cAAAwG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EACzCzG,WAAW,KAAK,QAAQ,gBACvBjB,OAAA;cAAKmH,SAAS,EAAC,QAAQ;cAAAC,QAAA,EACpBjG,YAAY,IACbA,YAAY,CAAC+D,MAAM,IACnB6E,MAAM,CAACC,MAAM,CAAC7I,YAAY,CAAC+D,MAAM,CAAC,CAACmD,MAAM,GAAG,CAAC,GAC3C0B,MAAM,CAACC,MAAM,CAAC7I,YAAY,CAAC+D,MAAM,CAAC,CAACoD,GAAG,CAAC,CAAC2B,KAAK,EAAE1B,KAAK,kBAClDvI,OAAA;gBAAiBmH,SAAS,EAAC,OAAO;gBAAAC,QAAA,gBAChCpH,OAAA;kBAAGmH,SAAS,EAAC,YAAY;kBAAAC,QAAA,GAAC,QAAM,EAAC6C,KAAK,CAACC,SAAS;gBAAA;kBAAA3C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACrD1H,OAAA;kBAAAoH,QAAA,EAAM6C,KAAK,CAACA;gBAAK;kBAAA1C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACxB1H,OAAA;kBAAGmH,SAAS,EAAC,gBAAgB;kBAAAC,QAAA,GAAC,YAClB,EAAC6C,KAAK,CAACE,QAAQ;gBAAA;kBAAA5C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxB,CAAC,EACHuC,KAAK,CAACG,OAAO,gBACZpK,OAAA;kBAAGmH,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAO;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,gBAExC1H,OAAA;kBAAGmH,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAO;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CACxC;cAAA,GAVOa,KAAK;gBAAAhB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAWV,CACN,CAAC,gBAEF1H,OAAA;gBAAKmH,SAAS,EAAC,OAAO;gBAAAC,QAAA,gBACpBpH,OAAA;kBAAGmH,SAAS,EAAC,YAAY;kBAAAC,QAAA,EAAC;gBAAoB;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,eAClD1H,OAAA;kBAAAoH,QAAA,EAAK;gBAAiB;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzB;YACN;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC,gBAEN1H,OAAA;cAAKmH,SAAS,EAAC,YAAY;cAAAC,QAAA,EACxBjG,YAAY,aAAZA,YAAY,eAAZA,YAAY,CAAE+C,UAAU,IACzB/C,YAAY,CAAC+C,UAAU,KAAK,iBAAiB,gBAC3ClE,OAAA;gBACEqH,GAAG,EAAElG,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAE+C,UAAW;gBAC9BoD,GAAG,EAAC,YAAY;gBAChB+C,OAAO,EAAGrE,CAAC,IAAK;kBACdA,CAAC,CAACE,MAAM,CAACmB,GAAG,GAAG,iBAAiB;kBAChChH,OAAO,CAACU,KAAK,CAAC,2BAA2B,CAAC;gBAC5C;cAAE,GACG,CAAAI,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEiD,mBAAmB,KAAI,SAAS;gBAAAmD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpD,CAAC,gBAEF1H,OAAA;gBAAKmH,SAAS,EAAC,OAAO;gBAAAC,QAAA,gBACpBpH,OAAA;kBAAGmH,SAAS,EAAC,YAAY;kBAAAC,QAAA,EAAC;gBAAuB;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,eACrD1H,OAAA;kBAAAoH,QAAA,EAAK;gBAGL;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YACN;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACc;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV;AAAClH,EAAA,CAxfQD,GAAG;AAAA+J,EAAA,GAAH/J,GAAG;AA0fZ,eAAeA,GAAG;AAAC,IAAA+J,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}